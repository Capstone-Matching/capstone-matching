<html>
<head>
  <title>Change Weights Page</title>
</head>
<body>
  <div class="d-flex justify-content-between align-items-center">
    <%= link_to "Back to Admin Home Page", adminlanding_path, class: "btn btn-danger custom-maroon-button m-3", id: "back-button" %>
    <button class="btn btn-danger custom-maroon-button m-3" id="dark-mode-toggle">Toggle Dark Mode</button>
  </div>
  <% if flash[:success].present? %>
    <div class="alert alert-success alert-dismissible fade show m-4" role="alert">
      <%= flash[:success] %>
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
  <% end %>

  <% if flash[:error].present? %>
    <div class="alert alert-danger alert-dismissible fade show m-1" role="alert">
      <%= flash[:error] %>
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
  <% end %>
  <div class="d-flex justify-content-center align-items-center">
      <h1>Change Feature Weights</h1>
  </div>
  <div class="container mt-4">
  <%= form_with(url: save_weights_path, id: 'change-weights-form', method: 'post') do |form| %>
    <table class="table table-bordered">
      <thead>
        <tr>
          <th>Feature Name</th>
          <th>Current Weight</th>
          <th>New Weight</th>
        </tr>
      </thead>
      <tbody id="table-body">
        <% @score_attributes.each do |score_attribute| %>
          <tr>
            <td><%= score_attribute.feature %></td>
            <td><%= number_with_precision(score_attribute.feature_weight * 100, precision: 2) %>%</td>
            <td>
              <div class="input-group">
                <%= form.text_field "feature_weights[]", value: number_with_precision(score_attribute.feature_weight * 100, precision: 2), class: 'form-control' %>
                <div class="input-group-append">
                  <span class="input-group-text">%</span>
                </div>
              </div>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
    <div class="d-flex justify-content-center align-items-center">
      <%= form.submit 'Save Changes', class: 'btn btn-danger custom-maroon-button ml-3', id: 'save-button' %>
    </div>
  <% end %>  
  </div>
</body>
