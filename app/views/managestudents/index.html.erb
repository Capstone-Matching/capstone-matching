<head>
  <title>Admin Landing Page</title>
</head>
<body>
  <%= render 'shared/admin_page_header' %>
  <%= render 'shared/notification' %>
  <div class="row justify-content-center mt-3">
    <div class="col-md-6">
      <%= form_with(url: filter_students_path, method: "get", id: "course-filter-form") do |form| %>
        <div class="form-group">
          <div class="d-flex">
            <div class="flex-grow-1">
              <label for="course_details">Select Course:</label>
              <%= select_tag "course_details", options_for_select(Course.all.map { |course| ["CSCE #{course.course_number}-#{course.section}-#{course.semester}", course.id] }), include_blank: true, class: "form-control" %>
            </div>
            <div class="mt-4 ml-2">
              <%= form.submit "Filter", class: "btn btn-primary" %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
  <div class="container table-responsive">
    <%= form_with(url: delete_students_path, method: "post", id: "manage-students-form") do |form| %>
      <table class="table table-bordered">
        <thead class="thead-dark">
          <tr>
            <th>Email</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Course</th>
            <th>Gender</th>
            <th>Nationality</th>
            <th>Work Authorization</th>
            <th>Willingness to Sign Contracts</th>
            <th>Delete?</th>
          </tr>
        </thead>
        <tbody>
          <% if @students.present? %>
            <% @students.each do |user| %>
              <% student = user.student %>
              <tr>
                <td><%= user.email %></td>
                <td><%= user.first_name %></td>
                <td><%= user.last_name %></td>
                <td><%= "CSCE " + student.course.course_number.to_s + "-" + student.course.section.to_s + "-" + student.course.semester %></td>
                <td><%= student.gender %></td>
                <td><%= student.nationality %></td>
                <td><%= student.work_auth %></td>
                <td><%= student.contract_sign %></td>
                <td>
                  <%= form.check_box "delete_students_emails[]", { value: user.email }, user.email, nil %>
                </td>
              </tr>
            <% end %>
          <% end %>      
        </tbody>
      </table>
      <div class="d-flex justify-content-center align-items-center">
        <%= form.button "Delete Students", class: "btn btn-danger m-2", id: "save-button" %>
      </div>
    <% end %>  
</body>